language: java
jdk: openjdk8
cache:
  directories:
  - $HOME/.m2
install: true
env:
  global:
  - DATE=`date +"%Y-%m-%d-%H%M"`
  - HERE_TOKEN_ENDPOINT_URL="https://stg.account.api.here.com/oauth2/token"
  - secure: t4JWkYSYbGS/c3JAazST1jmmi1OtZ07X0cmriFxQz0uLLJUifRF3wz2LaKbBC4RoW2reZaFiMon2gd5cy8HEaG1ZruoPzeHEMvsLe9QLegswj0U0d8k3V0Ncd9pknFL9/JI0RTAdCDQ28VfWX0PfY+5HDbYsixoF+9gZv3NED+3r772IqZTMkvhQEU7kT/AwcLXxw2fRr+iKjB7Qr5GLtZkHOhrPekX/4VQRRhTlImPDf4f3PdYawuBqZaLVATbqFedlE92m0tn6rtkHXRv/+rspWTprrBwmeuj6qPtVvTkI9kbvyaPLrHRvvPhROsf0iQuKsRGrO54jktZ/9lDTFhhkmkf4xYb2Hicpmh6soI/c4iR7niVDBDDseT8HonTgM+rtdgMBYeQnJrge0POUQTV1iSV8PCm5I1e1jN3ZTbY8S2bhEL55/UaB1MOf6rbEvxdBspE0Z2DBNHLZb7nML5+pJ3iNeuiYO2ujivTJMbiisEYxb3psF+tjNEfMfFlgwgX7d6julJeKpGSiwxBZWcmI02q8HZoC8f7DQhuw9Ybq0Qv5Akc7fmtY6acs1FlsO+z4sB5FqtEyvAH1OnqerEoRaL86ijAR4QcFINJJeoNWopzgGwBhL873dXFojSAMZ+6bS6OVO+C+pCrWCCeXXfmaafoytnC9Ev/wIO74NZ8=
  - secure: AMWoPS0zBzIoyJR64QJh8IxZmhhjtdSH+T+2zQdUpQZqeUfIEEwIVlmkLwOiJWRKJcVALu+qUmrTfRwCtRRl5ed2GqWYqLpRDUJO6FP+nwowqyL0YA8wyWbxJ4PpD4T/8rfDRQ7vP+h2G/8B6+qbKfrsttsLay/wd+DzwxZWcxVgrcuIiRJ0aAj3BkLkIlvnVWcOxwnBvUcA89MlQF2UYE2VAoiaSve8RD1ZMbdb4tqBQLJbp1q8/3H4YFEbMoaqemBh24Heopsd4oxfI08fcCnwEagaeG/8dmV/jnd+wEURr126zgDOowgCKwWUolY4lcIeAeJbm7uMdNWJmnCTKiQHFM1M1w9zTuLrv0A56DeSBuXkVYWV1oDnerTPBRTxwcroSVc4n2L1az3U/j5vhshRerPU3EFpoyDKgaxUJpUQMC+Bjqqog/urZYDlcj2cuXMeuoTpciFGXjLCehhaM+9mdOmo1peT3fT2VaI844R8Yc4HsuDmE+SoHUPSVF0JxUQVNDVBU7KGqpXeGUyEVewFWLiBdtx2aLd3Jy1PxUT7MxDleyOIdIhkEGMGytmyISXPm5nMRfLfFzwe93x7nOEV7PBSKOQprGYHMKh4X7QQ1wQosZekUb6FP30xaRevGgHkmnzMCzPAd+uX84IywqPLrVcZANQq4KpS3KUkuUw=
  - VERACODE_WRAPPER_VERSION=20.3.6.1
  - VERACODE_WRAPPER_SHA1=c5480e2d26c8ccaa063b437cbc4177c93e85afda
  - secure: "V5pJdjPaYMZ6rZcsOqqSyH1WQ8taLEV92WT1n2tglS3+rNjjHJUruDt0KYs0/MPiseU1xSiqr4oUr0x1nNt7AlmlyvnsEqMRWSbTmXY1+XG3SbnYV02X9A1yuR6S6tAHC4ooyvEqJWKplSAr961gbggNxNuvZrSj/UqdHuPcLLakL2+w8P/HrsQ7fVC6N1aOCqShqBZFii6Bl8hZXckoSjSPCeb5T6yXJ2UAgUZq6Yx5sG4j6kUi9ynYggjewNkkBq7JEMBXcSfTXk2TkKGzvIe1qaJ0ObMfUOJvVU9PplpRDRTjGYD0VbBSH2XZrJ9LUWRtcXkKaCtnU+M/+iAlSVW1E7gTJNEwwYb7N6G2Gi+1ZnMTATXmwp/qetYXrKi2Y1Z0+lWmo0bUO5lqd0EyFznuDKEEgOCB1AROftuW6ZP4qa1dGJwowgiaqSvCSWJeDbXjozVRVDbGolTOCP36Wf7ovsGwv5lXZkoyqztm/ZX7zHyZBz7NAGK+xXGn9mpxa8f+irITRYuVwzqj8EFPECj2M9VoXvaRqr7Z7J4whf0IhDaqh1cMZZ2C0A9Uol9MYC9NYPZIa4RtBD45A341x4Si7e3tNC9XB/bxxjSJtgdcpZMgObLYz1VPQHvTTfzX5O+AWU4XTlvJkTKu6KsEr2ocyAT1sCaU8IXBmwM5YdU="
  - secure: "hohZyPM99WSuxt8b618Vfo3SNOgFpA6UCM87kux1ksytlp9QoWCcu0JivkkKb4AAGa6c8J6xTp+KXA09Gev2UNe552F8PPM+PlZLr0pa/N+qdfw3mSnwdQC7xT6MheUMb+mgt7Wnl6OruNoDwGLdXnzahOj4uTDee5A05wsOPf6n0dI1cTS2ERrGiyk3nVMHVA5JSPBEhNYSv6y/BPZEf8qyts4QOmcldXhohNGhuhZ/RQi7AO4e7014dkkxACbQLi68BCveyPBQoX+1Kq3Kgr/as91szA4yxn6aVSEhp+OwEtWItkptADwGK8uVR66z3jHOtShk3Bu8PXPr5GCEjGsBMXhYUJleRuBEv8jsNOvdO0LL4lc39slmIUe5lEsHrtB97tcVjq8aC+6Z6QBGRrr8OB6TVSg8axvoghvkPiRWK5dE6Bl5+PNsPzz2MrxfH8NHjH78gyN/U7/EY9Mix4lzAzyQtNEfmOEiv7ypJlWgjBBIq60DEHCQRwb/Svvhwq35TP1X1aXd+8JbPIhIQBzlWYe4Qozg23k2rqtPu6Ny9nF2xO8UU9oGh4+TB3rD3U+jpIrKPZ8FlcsnsCYgfbj2h0x6q8Y37AlPg8nnmvMiADVHWeXKNjKbgL2ojl8NGHTsBO6zWZwpmrlzG5aiqriZqg8M3Cneh6BovJAh0tQ="
  - secure: "n/fsUKxYdjuWd2JZsguLh4foSSdV0t48/YosHeoUQzK26E7nQtrWKuPn7K7BR4or7O4Il6dxYXTMdveQhGD1PSqVrFGoTIsgGv08Lg7C6L0CtSv7uEODzGjVEA/BksfVk6WCifYASxPQIYdxWqzQ1P7cAVS5vJ3vVD0JzbjzdlKke4yQbj6acRKwhlCpDfn+qtn0z5M6oISL/rk2uygcLk5YmVm/1kaQOyqM4b8bZ1qXTK4HL9vwvG7TCVILLljvTXobh1rFxvEWE6HJqZdK+J3ZI/HVC5oy5g6iWk3c7DatJ8XqYP4IBojcWfiN1YrKDk9plhtrZfqFbyVYZ4vPYV5D/4UF+1l58dWsjpOdW6lMf4Oqf3gFOIAtX+VDSUnnFUcxbxFkYXeD8Mp9TG2d6madNm3wfBXUMFm+acjBNg4D3WpZemZW05rsVKG4NyQo4Rr6XSUHqXBvG/M/SQa09Ul+oyWp6+eo5G2slQn223uuha43gKO9hWXySZ6+4jmCB34xjxtBhTTRY+RwCuTCy157Tx+6bHTcKfR7EJP1wKdZRPpONrrXePvEJuIIgmtgGsRag22Jb57MbbiPu/P7bCKVpYuM+auN6ASZAdxagrdxo9TblbeYCxl8kvM9aoFZ2Uyb30MKxVdNlHO6StwgjksKXnPmv4DxByO4ZKx1IVg="

before_install:
  - wget https://repo1.maven.org/maven2/com/veracode/vosp/api/wrappers/vosp-api-wrappers-java/$VERACODE_WRAPPER_VERSION/vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar
  - sha1sum -c <<< "$VERACODE_WRAPPER_SHA1 vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar"

script:
  - mvn -version
  - mvn -Dhere.token.endpoint.url=$HERE_TOKEN_ENDPOINT_URL -Dhere.access.key.id=$ACCESS_KEY_ID -Dhere.access.key.secret=$ACCESS_KEY_SECRET clean install
  - java -jar vosp-api-wrappers-java-$VERACODE_WRAPPER_VERSION.jar -appid $VERACODE_APP_ID -vid $VERACODE_USER_ID -vkey $VERACODE_SECRET_KEY -action UploadAndScan -appname AAA-SDK -createprofile true -autoscan true -scantimeout 10000 -filepath here-oauth-client/target/here-oauth-client-*-SNAPSHOT.jar -version "$TRAVIS_JOB_ID - $TRAVIS_JOB_NUMBER $DATE"
